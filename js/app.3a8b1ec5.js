(function(){var e={6700:function(e,t,s){var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id=6700},3876:function(e,t,s){"use strict";var a=s(144),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],l=s(1001),r={},o=(0,l.Z)(r,i,n,!1,null,null,null),c=o.exports,d=s(1705);a["default"].use(d.Z);var u=new d.Z({}),m=s(8345),p=s(998),h=s(6190),f=s(266),g=s(2118),v=s(1713),j=s(7423),w=s(9258),k=s(9780),b=function(){var e=this,t=e._self._c;return t(p.Z,{attrs:{id:"inspire"}},[t(w.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" Неправильно введён пароль или email "),[t(h.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),t(g.Z,{attrs:{"fill-height":"",fluid:""}},[t(v.Z,{attrs:{justify:"space-around",align:"center"}},[t(f.Z,{attrs:{cols:"12",md:"4"}},[t(j.Z,{staticClass:"mx-auto pa-10",attrs:{elevation:"10",rounded:""}},[t(k.Z,{attrs:{placeholder:"Почтовый адрес",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k.Z,{attrs:{type:"password",placeholder:"Пароль",rules:e.requiredRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("span",[e._v(" Нет аккаунта? ")]),t("router-link",{attrs:{to:"register"}},[t("span",[e._v(" Зарегистрироваться ")])]),t(h.Z,{staticClass:"mt-4",attrs:{block:"",color:"primary"},on:{click:e.loginClick}},[e._v(" Войти ")])],1)],1)],1)],1)],1)},_=[],Z=(s(7658),s(9669)),x=s.n(Z);const F=x().create({baseURL:"http://markwebdev.ru/api/v1/",headers:{authorization:`Bearer ${localStorage.getItem("token")}`}});var C=F,y={name:"LoginPage",data:()=>({snackbar:!1,password:"",token:"",email:"",emailRules:[e=>!!e||"Введите e-mail",e=>/.+@.+/.test(e)||"Введите валидный e-mail"],requiredRules:[e=>!!e||"Введите пароль"]}),methods:{async loginClick(){await C.post(`auth/login?email=${this.email}&password=${this.password}`).then((e=>{this.token=e.data.data.token,localStorage.setItem("token",e.data.data.token),this.$router.push("home")})).catch((e=>{console.log(e),this.snackbar=!0}))}},mounted(){localStorage.setItem("token","")}},I=y,S=(0,l.Z)(I,b,_,!1,null,"16a7dd36",null),z=S.exports,$=s(5125),D=function(){var e=this,t=e._self._c;return t(p.Z,{attrs:{id:"inspire"}},[t(w.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" Заполните поля правильно пожалуйста "),[t(h.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),t(g.Z,{attrs:{"fill-height":"",fluid:""}},[t(v.Z,{attrs:{justify:"space-around",align:"center"}},[t(f.Z,{attrs:{cols:"12",md:"4"}},[t($.Z,{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(j.Z,{staticClass:"mx-auto pa-10",attrs:{elevation:"10",rounded:""}},[t(k.Z,{attrs:{placeholder:"Почтовый адрес",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k.Z,{attrs:{placeholder:"Имя",rules:e.requiredRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(k.Z,{attrs:{type:"password",placeholder:"Пароль",rules:e.requiredRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(k.Z,{attrs:{type:"password",placeholder:"Повторите пароль",rules:[e.password===e.passwordDouble||"Пароли должны совпадать"]},model:{value:e.passwordDouble,callback:function(t){e.passwordDouble=t},expression:"passwordDouble"}}),t("span",[e._v(" Есть аккаунт? ")]),t("router-link",{attrs:{to:"/"}},[t("span",[e._v(" Войти ")])]),t(h.Z,{staticClass:"mt-4",attrs:{block:"",color:"primary"},on:{click:e.registerClick}},[e._v(" Зарегистрироваться ")])],1)],1)],1)],1)],1)],1)},T=[],R={name:"RegisterBlock",data:()=>({snackbar:!1,valid:!1,name:"",passwordDouble:"",token:"",password:"",email:"",emailRules:[e=>!!e||"Введите e-mail",e=>/.+@.+/.test(e)||"Введите валидный e-mail"],requiredRules:[e=>!!e||"Введите пароль"]}),methods:{async registerClick(){this.valid?await C.post(`auth/register?email=${this.email}&name=${this.name}&password=${this.password}`).then((e=>{console.log(this.email),console.log(this.password),console.log(e.data),this.$router.push("/")})).catch((e=>{console.log(e)})):this.snackbar=!0}}},V=R,O=(0,l.Z)(V,D,T,!1,null,"0fb25912",null),M=O.exports,L=s(6232),P=s(5550),U=s(3423),N=s(4324),E=s(3059),q=s(5554),B=s(5372),W=s(9422),A=s(3687),Y=s(7953),G=function(){var e=this,t=e._self._c;return t(p.Z,{attrs:{id:"inspire"}},[t("dialog-rename",{attrs:{dialogString:e.dialogString},on:{SaveName:function(t){return e.renameFile(t)}},model:{value:e.dialogRename,callback:function(t){e.dialogRename=t},expression:"dialogRename"}}),t("dialog-new-folder",{attrs:{dialogString:e.dialogString},on:{SaveFolder:function(t){return e.createFolder(t)}},model:{value:e.dialogNewFolder,callback:function(t){e.dialogNewFolder=t},expression:"dialogNewFolder"}}),t(w.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarMessage)+" "),[t(h.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),e.screenWidth<700?t(q.Z,{attrs:{app:""},model:{value:e.leftDrawer,callback:function(t){e.leftDrawer=t},expression:"leftDrawer"}},[t(g.Z,[t("text-field",{staticClass:"mt-3",on:{changeFilter:function(t){e.filter=t}}}),t("select-items",{staticClass:"my-3",on:{changeCurrentView:function(t){e.currentView=t}}}),t("menu-container",{attrs:{currentFolder:e.currentFolder,allSize:e.getSizeItem(e.allSize)},on:{uploadFile:function(t){return e.cloudItems.push(t)},errorUploadFile:function(t){return e.openSnackbar(t)},createFolder:e.createFolderDialog}})],1)],1):e._e(),t(L.Z,{attrs:{app:"",color:"white",flat:""}},[e.screenWidth<700?t("div",[t("div",{staticClass:"d-flex align-center"},[t(P.Z,{on:{click:function(t){e.leftDrawer=!e.leftDrawer}}}),t(Y.qW,[e._v("Application")])],1)]):t(g.Z,{staticClass:"py-0 fill-height"},[t(U.Z,{staticClass:"mr-10",attrs:{color:"#1976D2",size:"32"}},[t(N.Z,{attrs:{dark:""}},[e._v(" mdi-account-circle ")])],1),t(Y.qW,[e._v("Application")]),t(A.Z),t(W.Z,{attrs:{"max-width":"220"}},[t("text-field",{on:{changeFilter:function(t){e.filter=t}}})],1),t(W.Z,{attrs:{"max-width":"160"}},[t("select-items",{on:{changeCurrentView:function(t){e.currentView=t}}})],1)],1)],1),t(E.Z,{staticClass:"grey lighten-3"},[t(g.Z,[t(v.Z,[e.screenWidth>700?t(f.Z,{attrs:{cols:"3"}},[t(j.Z,{attrs:{rounded:"lg"}},[t("menu-container",{attrs:{currentFolder:e.currentFolder,allSize:e.getSizeItem(e.allSize)},on:{uploadFile:function(t){return e.cloudItems.push(t)},errorUploadFile:function(t){return e.openSnackbar(t)},createFolder:e.createFolderDialog}})],1)],1):e._e(),t(f.Z,[t(j.Z,{attrs:{rounded:"lg"}},[t("div",{staticClass:"ml-3 pt-2"},[t("span",{staticClass:"underline-text",on:{click:function(t){e.currentFolder=-1}}},[e._v(" Главная ")]),t("span",[e._v(" / "+e._s(e.folders.find((t=>t.id===e.currentFolder))?.name)+" ")])]),e._v(" "+e._s(e.filter)+" "),-1===e.currentFolder?t("folder-items",{attrs:{paginatedItems:e.folders,getSizeItem:e.getSizeItem},on:{changeCurrentFolder:function(t){return e.changeFolder(t)}}}):e._e(),"Сетка"===e.currentView?t("grid-items",{attrs:{paginatedItems:e.paginatedItems},on:{downloadItem:function(t){return e.downloadItem(t)},renameItem:function(t){return e.renameDialog(t)},deleteItem:function(t){return e.deleteItem(t)}}}):t("table-items",{attrs:{paginatedItems:e.paginatedItems,getSizeItem:e.getSizeItem},on:{downloadItem:function(t){return e.downloadItem(t)},renameItem:function(t){return e.renameDialog(t)},deleteItem:function(t){return e.deleteItem(t)}}}),e.cloudItems.length>0?t("div",{staticClass:"text-left mt-10 pl-3"},[t("span",{staticClass:"blue-text"},[e._v(" "+e._s("Объём папки "+e.getCurrentSize())+" ")])]):e._e(),t("div",{staticClass:"text-center mt-10 pb-5"},[e.changePaginationLength>1?t(B.Z,{attrs:{length:e.changePaginationLength},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1)],1)],1)],1)],1)],1)],1)},H=[],J=function(){var e=this,t=e._self._c;return t("div",[e.paginatedItems.length?t("div",{staticClass:"teble-top"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t("div",{staticClass:"py-3 row-item"},[t("div",{staticClass:"row-start"},[t("div",{staticClass:"row-icon"},[t(N.Z,{attrs:{size:"32"}},[e._v(" mdi-file ")])],1),t("div",{staticClass:"row-info"},[t("div",{staticClass:"row-name"},[e._v(" "+e._s(s.full_name)+" ")]),t("div",{staticClass:"row-size"},[e._v(" "+e._s(e.getSizeItem(s.size))+" ")])])]),t("div",{staticClass:"row-end"},[t("div",{staticClass:"row-date"},[e._v(" "+e._s(e.$moment(s.created_at).format("D.M.YYYY, H:MM"))+" ")]),t("div",{staticClass:"row-btn"},[t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("downloadItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-download")])],1),t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("renameItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-lead-pencil")])],1),t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("deleteItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-delete")])],1)],1)])])])})),0):t("div",[t("div",{staticClass:"pt-10",attrs:{align:"center"}},[e._v(" Файлов пока нет ")]),t("div",{attrs:{align:"center"}},[t(N.Z,{attrs:{size:"32"}},[e._v("mdi-halloween")])],1)])])},K=[],Q={name:"TableItems",props:{paginatedItems:Array,getSizeItem:Function},methods:{}},X=Q,ee=(0,l.Z)(X,J,K,!1,null,null,null),te=ee.exports,se=s(9582),ae=s(4886),ie=function(){var e=this,t=e._self._c;return t("div",[e.paginatedItems.length?t("div",[t("div",{staticClass:"grid pt-5 px-5"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t(se.Z,{attrs:{height:"110",align:"center"}},[t(N.Z,{staticClass:"mt-5",attrs:{size:"32"}},[e._v(" mdi-file ")]),t(v.Z,{staticClass:"ma-1",attrs:{align:"center",justify:"space-between"}},[t("div",{staticClass:"hidden"},[t(ae.EB,{staticClass:"pa-1 text-caption justify-center",domProps:{textContent:e._s(s.full_name)}})],1)]),t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("downloadItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-download")])],1),t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("renameItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-lead-pencil")])],1),t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("deleteItem",s.id)}}},[t(N.Z,{attrs:{size:"18"}},[e._v("mdi-delete")])],1)],1)],1)})),0)]):t("div",[t("div",{staticClass:"pt-10",attrs:{align:"center"}},[e._v(" Файлов пока нет ")]),t("div",{attrs:{align:"center"}},[t(N.Z,{attrs:{size:"32"}},[e._v("mdi-halloween")])],1)])])},ne=[],le={name:"GridItems",props:{paginatedItems:Array}},re=le,oe=(0,l.Z)(re,ie,ne,!1,null,"6af0caa2",null),ce=oe.exports,de=s(8383),ue=function(){var e=this,t=e._self._c;return t(de.Z,{attrs:{items:e.viewItems.map((e=>e.value)),"menu-props":"auto",label:"Select","hide-details":"","prepend-icon":e.viewItems.find((t=>t.value===e.currentSelectView)).icon,"single-line":""},on:{change:function(t){return e.setcurrentView()}},model:{value:e.currentSelectView,callback:function(t){e.currentSelectView=t},expression:"currentSelectView"}})},me=[],pe={name:"SelectItems",emits:{changeCurrentView:null},data:()=>({currentSelectView:"Сетка",viewItems:[{value:"Сетка",icon:"mdi-view-grid"},{value:"Список",icon:"mdi-format-list-bulleted"}]}),methods:{setcurrentView(){localStorage.setItem("currentSelect",this.currentSelectView),this.$emit("changeCurrentView",this.currentSelectView)}},mounted(){localStorage.getItem("currentSelect")?this.currentSelectView=localStorage.getItem("currentSelect"):this.currentSelectView="Сетка",this.$emit("changeCurrentView",this.currentSelectView)}},he=pe,fe=(0,l.Z)(he,ue,me,!1,null,"49454310",null),ge=fe.exports,ve=function(){var e=this,t=e._self._c;return t(k.Z,{staticClass:"mr-8",attrs:{clearable:"","prepend-icon":"mdi-magnify",placeholder:"Найти",dense:"",flat:"","hide-details":"",rounded:"","solo-inverted":""},on:{input:function(t){return e.$emit("changeFilter",e.filter)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})},je=[],we={name:"TextField",data:()=>({filter:""}),emits:{changeFilter:null}},ke=we,be=(0,l.Z)(ke,ve,je,!1,null,"867f777c",null),_e=be.exports,Ze=s(9223),xe=s(5808),Fe=s(4525),Ce=s(6435),ye=function(){var e=this,t=e._self._c;return t(xe.Z,{attrs:{color:"transparent"}},[t("div",{staticClass:"pt-6 load-field-block",attrs:{align:"left"}},[t(N.Z,{staticClass:"pl-5",attrs:{left:""}},[e._v(" mdi-cloud-upload ")]),t(h.Z,{staticClass:"mr-8 load-field text-none",attrs:{color:"primary",dense:"","hide-details":"",rounded:"","solo-inverted":"",loading:e.isSelecting},on:{click:e.selectFile}},[e._v(" Загрузить ")]),t("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChanged}})],1),t("div",{staticClass:"pt-5 load-field-block",attrs:{align:"left"}},[t(N.Z,{staticClass:"pl-5",attrs:{left:""}},[e._v(" mdi-folder-multiple-plus ")]),t(h.Z,{staticClass:"mr-8 load-field text-none",attrs:{outlined:"",color:"primary",dense:"",rounded:"","solo-inverted":"",disabled:!(-1===e.currentFolder)},on:{click:function(t){return e.createFolder()}}},[e._v(" Новая папка ")])],1),t(Fe.Z,{staticClass:"big-padding"},[t(Ce.km,[t(Ce.V9,[t("span",{staticClass:"blue-text-main"},[e._v(" "+e._s("На диске "+e.allSize)+" ")])])],1)],1),t(Ze.Z,{staticClass:"my-2"}),t(Fe.Z,[t(Ce.km,[t(h.Z,{attrs:{outlined:"",color:"error"},on:{click:e.logout}},[e._v(" Выйти ")])],1)],1)],1)},Ie=[],Se={name:"MenuContainer",data:()=>({selectedFile:null,isSelecting:!1}),props:{currentFolder:Number,allSize:String},methods:{async logout(){await C.post("auth/logout").then((()=>{this.$router.push("/")})).catch((e=>{console.log(e)}))},createFolder(){this.$emit("createFolder")},selectFile(){this.isSelecting=!0,window.addEventListener("focus",(()=>{this.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},onFileChanged(e){this.selectedFile=e.target.files[0],this.uploadFile()},async uploadFile(){if("php"===this.selectedFile.name.split(".").pop()||this.selectedFile.size>20971520)this.$emit("errorUploadFile","Нельзя загружать файлы .php или файлы весом боьше 20Мб");else{const e=new FormData;e.append("file",this.selectedFile),-1===this.currentFolder?await C.post("files",e).then((e=>{this.$emit("uploadFile",e.data.data)})).catch((e=>{console.log(e),this.$emit("errorUploadFile","Не удалось выбрать файл")})):await C.post(`files?folder_id=${this.currentFolder}`,e).then((e=>{this.$emit("uploadFile",e.data.data)})).catch((e=>{console.log(e),this.$emit("errorUploadFile","Не удалось выбрать файл")}))}}}},ze=Se,$e=(0,l.Z)(ze,ye,Ie,!1,null,"23371900",null),De=$e.exports,Te=s(4061),Re=function(){var e=this,t=e._self._c;return t(Te.Z,{attrs:{"max-width":"80%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(se.Z,[t(ae.EB,{staticClass:"text-h5"},[e._v(" Переименовать файл ")]),t(k.Z,{staticClass:"px-5",attrs:{placeholder:e.dialogString},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),t(ae.h7,[t("div",{attrs:{align:"center",justify:"start"}},[t(h.Z,{attrs:{small:"",color:"primary"},on:{click:function(t){e.$emit("SaveName",e.inputText),e.inputText=""}}},[e._v(" Сохранить ")]),t(h.Z,{staticClass:"ml-3",attrs:{small:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.show=!1,e.inputText=""}}},[e._v(" Отмена ")])],1)])],1)],1)},Ve=[],Oe={name:"DialogRename",props:{value:Boolean,dialogString:String},data:()=>({inputText:""}),computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}}},Me=Oe,Le=(0,l.Z)(Me,Re,Ve,!1,null,"5e335cb7",null),Pe=Le.exports,Ue=function(){var e=this,t=e._self._c;return t(Te.Z,{attrs:{"max-width":"80%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(se.Z,[t(ae.EB,{staticClass:"text-h5"},[e._v(" Новая папка ")]),t(k.Z,{staticClass:"px-5",attrs:{placeholder:e.dialogString},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),t(ae.h7,[t("div",{attrs:{align:"center",justify:"start"}},[t(h.Z,{attrs:{small:"",color:"primary"},on:{click:function(t){e.$emit("SaveFolder",e.inputText),e.inputText=""}}},[e._v(" Создать ")]),t(h.Z,{staticClass:"ml-3",attrs:{small:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.show=!1,e.inputText=""}}},[e._v(" Отмена ")])],1)])],1)],1)},Ne=[],Ee={name:"DialogNewFolder",props:{value:Boolean,dialogString:String},data:()=>({inputText:""}),computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}}},qe=Ee,Be=(0,l.Z)(qe,Ue,Ne,!1,null,"04e06b38",null),We=Be.exports,Ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid pt-5 px-5"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t(se.Z,{attrs:{elevation:"0",height:"90",align:"center"},on:{click:function(t){return e.folderClick(s)}}},[t(N.Z,{staticClass:"mt-1",attrs:{color:"primary",size:"32"}},[e._v(" mdi-folder ")]),t(v.Z,{staticClass:"ma-1",attrs:{align:"center",justify:"space-between"}},[t("div",{staticClass:"hidden"},[t(ae.EB,{staticClass:"pa-1 text-caption folder-name justify-center",domProps:{textContent:e._s(s.name)}})],1),t("div",{staticClass:"hidden"},[t(ae.EB,{staticClass:"pa-1 text-caption justify-center"},[e._v(e._s(e.getSizeItem(s.size)))])],1)])],1)],1)})),0)},Ye=[],Ge={name:"FolderItems",props:{paginatedItems:Array,getSizeItem:Function},methods:{folderClick(e){e.full_name||this.$emit("changeCurrentFolder",e.id)}}},He=Ge,Je=(0,l.Z)(He,Ae,Ye,!1,null,"cc51e2f6",null),Ke=Je.exports,Qe={name:"HomePage",components:{DialogNewFolder:We,DialogRename:Pe,MenuContainer:De,TextField:_e,SelectItems:ge,GridItems:ce,FolderItems:Ke,TableItems:te},data:()=>({fullSize:[0,0],currentFolder:-1,folders:[],dialogString:"",dialogTitle:"",dialogNewFolder:!1,dialogRename:!1,renameField:{id:null,name:null},snackbarMessage:"",snackbar:!1,leftDrawer:null,screenWidth:null,filter:"",page:1,cloudItems:[],currentView:"Сетка",allSize:0}),computed:{startIndex(){return 10*(this.page-1)},endIndex(){return 10*this.page},filteredItems(){return this.cloudItems.filter((e=>e.full_name.toUpperCase().includes(this.filter?.toUpperCase())))},paginatedItems(){return this.filteredItems.slice(this.startIndex,this.endIndex)},changePaginationLength(){return Math.ceil(this.filteredItems.length/10)}},watch:{filter(){this.page=1},currentFolder(){this.getFiles(),this.getFolders()},cloudItems(){this.gelAllSizeMainFiles()}},methods:{async gelAllSizeMainFiles(){await C.get("files").then((e=>{this.allSize=e.data.data.reduce(((e,t)=>e+t.size),0)})).catch((e=>{console.log(e)}))},changeFolder(e){this.currentFolder=e},createFolderDialog(){this.dialogString="Новая папка",this.dialogNewFolder=!0},async createFolder(e){this.dialogNewFolder=!1,await C.post(`folders?name=${e}`).then((e=>{this.folders.push(e.data.data)})).catch((e=>{this.openSnackbar(e.response.data.message)}))},getSizeItem(e){return e>1048576?Math.round(e/1048576)+" МБ":e>1024?Math.round(e/1024)+" КБ":e+" байт"},getCurrentSize(){let e=this.cloudItems.reduce(((e,t)=>e+t.size),0);return this.getSizeItem(e)},openSnackbar(e){this.snackbarMessage=e,this.snackbar=!0},async renameFile(e){this.dialogRename=!1,this.renameField.name=e,console.log(this.renameField.id),await C.patch(`files/${this.renameField.id}`,{name:this.renameField.name}).then((()=>{this.getFiles()})).catch((e=>{console.log(e)}))},renameDialog(e){this.dialogString=this.cloudItems.find((t=>t.id===e)).name,this.dialogRename=!0,this.renameField={id:e,name:this.cloudItems.find((t=>t.id===e)).name}},async deleteItem(e){await C["delete"](`files/${e}`).then((()=>{this.cloudItems=this.cloudItems.filter((t=>t.id!==e))})).catch((e=>{console.log(e)}))},async downloadItem(e){const t=this.cloudItems.find((t=>t.id===e)).full_name;await C.get(`files/${e}/download`,{responseType:"blob"}).then((e=>{const s=new Blob([e.data],{type:`${t.split(".").pop()}`}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=t,a.click(),URL.revokeObjectURL(a.href)})).catch((e=>{console.log(e)}))},async getFiles(){await C.get(`files?folder_id=${this.currentFolder}`).then((e=>{this.cloudItems=e.data.data})).catch((e=>{console.log(e)}))},async getFolders(){await C.get("folders").then((e=>{this.folders=e.data.data})).catch((e=>{console.log(e)}))},onResize(){this.screenWidth=window.innerWidth},checkLogin(){""===localStorage.getItem("token")&&this.$router.push("/")}},mounted(){this.screenWidth=window.screen.width,this.$nextTick((()=>{window.addEventListener("resize",this.onResize)})),this.getFiles(),this.getFolders(),this.checkLogin()},beforeDestroy(){window.removeEventListener("resize",this.onResize)}},Xe=Qe,et=(0,l.Z)(Xe,G,H,!1,null,null,null),tt=et.exports,st=s(2590),at=s.n(st);a["default"].use(m.ZP),a["default"].use(at());const it=[{path:"/",name:"login",component:z},{path:"/home",name:"home",component:tt},{path:"/register",name:"register",component:M}],nt=new m.ZP({mode:"history",base:"/ito/",routes:it});var lt=nt;a["default"].config.productionTip=!1,new a["default"]({vuetify:u,router:lt,render:e=>e(c)}).$mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,o=0;o<a.length;o++)(!1&n||l>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[o])}))?a.splice(o--,1):(r=!1,n<l&&(l=n));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,l=a[0],r=a[1],o=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(o)var d=o(s)}for(t&&t(a);c<l.length;c++)n=l[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkre"]=self["webpackChunkre"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3876)}));a=s.O(a)})();
//# sourceMappingURL=app.3a8b1ec5.js.map